{% load track %}

<table class="table table-condensed table-striped">
    <thead>
        <tr>
            <th></th>
            <th>Track</th>
            <th>Artist</th>
            <th>Album</th>
            <th>Genre</th>
            <th>Bitrate</th>
            <th>Length</th>
        </tr>
    </thead>
    <tbody>
        {% for track in page %}
        <tr>
            <td class="nowrap">
                <a class="play" data-track-id="{{ track.pk }}" data-track-url="{{ track.url }}" data-artist="{{ track.artist }}" data-title="{{ track }}" data-cover-url="{{ track.album.artwork_url }}" href="#play"><i class="icon-play-circle"></i></a>
                <a class="" href="#download"><i class="icon-download"></i></a>
            </td>
            <td><a href="{% url "track-edit" track_id=track.pk %}">{{ track }}</a></td>
            <td>{{ track.artist }}</td>
            <td>{{ track.album }}</td>
            <td>{{ track.genre }}</td>
            <td>{{ track.bitrate|bitrate }}</td>
            <td>{{ track.length|track_length }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if page.paginator.num_pages > 1 %}
<div class="pagination">
    <ul>
        {% if page.has_previous %}
        <li><a class="filter" href="#page-{{ page.previous_page_number }}" data-query='{"p": {{ page.previous_page_number }}, "q": "{{ query.q }}", "u": "{{ query.u }}", "g": "{{ query.g }}"}'>&laquo;</a></li>
        {% else %}
        <li class="disabled"><a href="">&laquo;</a></li>
        {% endif %}
        {% for p in page_range %}
        <li{% if p == page.number %} class="disabled"{% endif %}><a class="filter" href="#page-{{ p }}" data-query='{"p": {{ p }}, "q": "{{ query.q }}", "u": "{{ query.u }}", "g": "{{ query.g }}"}'>{{ p }}</a></li>
        {% endfor %}
        {% if page.has_next %}
        <li><a class="filter" href="#page-{{ page.next_page_number }}" data-query='{"p": {{ page.next_page_number }}, "q": "{{ query.q }}", "u": "{{ query.u }}", "g": "{{ query.g }}"}'>&raquo;</a></li>
        {% else %}
        <li class="disabled"><a href="">&raquo;</a></li>
        {% endif %}
    </ul>
</div>
{% endif %}
