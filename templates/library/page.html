{% load track %}

<table class="table table-condensed table-striped">
    <thead>
        <tr>
            <th></th>
            <th>Track</th>
            <th>Artist</th>
            <th>Album</th>
            <th>Genre</th>
            <th>Length</th>
        </tr>
    </thead>
    <tbody>
        {% for track in page %}
        <tr class="stretch">
            <td class="nowrap">
                <div class="btn-group">
                    <a class="btn btn-mini play" data-track-id="{{ track.pk }}" data-track-url="{{ track.url }}" data-artist="{{ track.artist }}" data-title="{{ track }}" data-cover-url="{{ track.album.artwork_url }}" href="#play"><i class="icon-play-circle"></i> Play</a>
                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#">
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href=""><i class="icon-list"></i> New Playlist</a>
                        <li class="dropdown-submenu">
                            <a tabindex="-1" href="#"><i class="icon-plus-sign"></i> Add to Playlist</a>
                            <ul class="dropdown-menu">{% for p in playlists %}
                                <li><a class="playlist-add" data-track="{{ track.pk }}" data-playlist="{{ p.pk }}" href="#add">{{ p }}</a></li>
                            {% endfor %}</ul>
                        </li>
                        <li class="divider"></li>
                        <li><a href=""><i class="icon-download"></i> Download Track</a>
                        <li><a href=""><i class="icon-info-sign"></i> More Information</a>
                    </ul>
                </div>
            </td>
            <td><a href="{% url "track-edit" track_id=track.pk %}">{{ track }}</a></td>
            <td>{{ track.artist }}</td>
            <td>{{ track.album }}</td>
            <td>{{ track.genre }}</td>
            <td>{{ track.length|track_length }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if page.paginator.num_pages > 1 %}
<div class="pagination pagination-centered">
    <ul>
        {% if page.has_previous %}
        <li><a class="filter" href="#page-{{ page.previous_page_number }}" data-query='{"p": {{ page.previous_page_number }}, "q": "{{ query.q }}", "u": "{{ query.u }}", "g": "{{ query.g }}"}'>&laquo;</a></li>
        {% else %}
        <li class="disabled"><a href="">&laquo;</a></li>
        {% endif %}
        {% for p in page_range %}
        <li{% if p == page.number %} class="disabled"{% endif %}><a class="filter" href="#page-{{ p }}" data-query='{"p": {{ p }}, "q": "{{ query.q }}", "u": "{{ query.u }}", "g": "{{ query.g }}"}'>{{ p }}</a></li>
        {% endfor %}
        {% if page.has_next %}
        <li><a class="filter" href="#page-{{ page.next_page_number }}" data-query='{"p": {{ page.next_page_number }}, "q": "{{ query.q }}", "u": "{{ query.u }}", "g": "{{ query.g }}"}'>&raquo;</a></li>
        {% else %}
        <li class="disabled"><a href="">&raquo;</a></li>
        {% endif %}
    </ul>
</div>
{% endif %}
